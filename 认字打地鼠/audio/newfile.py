import requests
import time

# 配置参数（包含所有需要转换的内容）
DATA = [
    "一帆风顺，愿你未来一帆风顺的一帆风顺",
"万事如意，希望生活万事如意的万事如意",
"四面八方，汇聚了四面八方人群的四面八方",
"五光十色，呈现出五光十色景象的五光十色",
"六神无主，吓得六神无主时的六神无主",
"七上八下，心里七上八下的七上八下",
"八面玲珑，为人八面玲珑的八面玲珑",
"九牛一毛，这点困难犹如九牛一毛的九牛一毛",
"十全十美，追求十全十美的十全十美",
"百发百中，他射箭百发百中的百发百中",
"千方百计，为解决问题千方百计的千方百计",
"万紫千红，春天里万紫千红的万紫千红",
"三心二意，做事不能三心二意的三心二意",
"半信半疑，抱着半信半疑态度的半信半疑",
"自言自语，经常自言自语的自言自语",
"自作自受，自己自作自受的自作自受",
"大手大脚，花钱大手大脚的大手大脚",
"东张西望，在人群中东张西望的东张西望",
"南辕北辙，目标和行动南辕北辙的南辕北辙",
"左思右想，左思右想后做决定的左思右想",
"一马当先，总是一马当先冲在前的一马当先",
"二话不说，二话不说就行动的二话不说",
"三言两语，用三言两语就能说清的三言两语",
"四通八达，交通四通八达的四通八达",
"五花八门，有着五花八门的选择的五花八门",
"六六大顺，祝一切六六大顺的六六大顺",
"七嘴八舌，大家七嘴八舌讨论的七嘴八舌",
"八仙过海，如同八仙过海各显神通的八仙过海",
"九死一生，经历了九死一生的九死一生",
"十拿九稳，这件事十拿九稳的十拿九稳",
"百依百顺，对他百依百顺的百依百顺",
"千变万化，世界千变万化的千变万化",
"万无一失，做到万无一失的万无一失",
"一穷二白，过去一穷二白的一穷二白",
"一清二楚，把事情弄得一清二楚的一清二楚",
"一干二净，打扫得一干二净的一干二净",
"一了百了，希望能一了百了的一了百了",
"一呼百应，他振臂一呼百应的一呼百应",
"一唱一和，两人一唱一和的一唱一和",
"一颦一笑，她的一颦一笑都很动人的一颦一笑",
"一草一木，爱护身边的一草一木的一草一木",
"一点一滴，积累着一点一滴经验的一点一滴",
"一生一世，承诺一生一世的一生一世",
"一年一度，参加一年一度活动的一年一度",
"一五一十，把事情一五一十说清楚的一五一十",
"一模一样，这两个东西一模一样的一模一样",
"一朝一夕，不是一朝一夕能完成的一朝一夕",
"一针一线，珍惜一针一线的一针一线",
"一字一句，他一字一句读出来的一字一句",
"一步一趋，一步一趋跟着走的一步一趋",
"一瘸一拐，走路一瘸一拐的一瘸一拐",
"一知半解，对知识一知半解的一知半解",
"一落千丈，成绩一落千丈的一落千丈",
"一曝十寒，学习不能一曝十寒的一曝十寒",
"一丘之貉，他们是一丘之貉的一丘之貉",
"一视同仁，对待学生一视同仁的一视同仁",
"一厢情愿，不要总是一厢情愿的一厢情愿",
"一意孤行，他总是一意孤行的一意孤行",
"一蹴而就，成功不是一蹴而就的一蹴而就",
"一败涂地，输得一败涂地的一败涂地",
"一本正经，他一本正经说话的一本正经",
"一笔勾销，把过去的恩怨一笔勾销的一笔勾销",
"一臂之力，助他一臂之力的一臂之力",
"一尘不染，房间打扫得一尘不染的一尘不染",
"一成不变，不能总是一成不变的一成不变",
"一筹莫展，面对难题一筹莫展的一筹莫展",
"一触即发，局势一触即发的一触即发",
"一锤定音，他的话一锤定音的一锤定音",
"一蹶不振，不能一蹶不振的一蹶不振",
"一技之长，拥有一技之长的一技之长",
"一家之言，这只是一家之言的一家之言",
"一见钟情，两人一见钟情的一见钟情",
"一箭双雕，能做到一箭双雕的一箭双雕",
"一举成名，他一举成名的一举成名",
"一举两得，争取做到一举两得的一举两得",
"一览无余，景色一览无余的一览无余",
"一劳永逸，没有一劳永逸的事的一劳永逸",
"一马平川，前方一马平川的一马平川",
"一脉相承，文化一脉相承的一脉相承",
"一面之词，不能只听一面之词的一面之词",
"一鸣惊人，他一鸣惊人的一鸣惊人",
"一目了然，情况一目了然的一目了然",
"一贫如洗，曾经一贫如洗的一贫如洗",
"一气呵成，文章一气呵成的一气呵成",
"一窍不通，对这方面一窍不通的一窍不通",
"一如既往，他一如既往努力的一如既往",
"一扫而空，把食物一扫而空的一扫而空",
"一身是胆，他一身是胆的一身是胆",
"一塌糊涂，把事情弄得一塌糊涂的一塌糊涂",
"一通百通，学习能一通百通的一通百通",
"一网打尽，将敌人一网打尽的一网打尽",
"一往情深，对她一往情深的一往情深",
"一望无际，望着一望无际大海的一望无际",
"一文不值，这个东西一文不值的一文不值",
"一无是处，不能说他一无是处的一无是处",
"一无所获，这次行动一无所获的一无所获",
"一无所有，曾经一无所有的一无所有",
"一无所知，对这件事一无所知的一无所知",
"一泻千里，江水一泻千里的一泻千里",
"一衣带水，两国一衣带水的一衣带水",
"一意孤行，别再一意孤行的一意孤行",
"一语道破，他一语道破真相的一语道破",
"一语双关，这句话一语双关的一语双关",
"一张一弛，生活要一张一弛的一张一弛",
"一朝天子一朝臣，真是一朝天子一朝臣的一朝天子一朝臣",
"走马观花，不能走马观花地看的走马观花",
"望梅止渴，用望梅止渴的方法激励的望梅止渴",
"掩耳盗铃，不要做掩耳盗铃的事的掩耳盗铃",
"守株待兔，不能守株待兔般等待的守株待兔",
"刻舟求剑，这种刻舟求剑的行为不可取的刻舟求剑",
"叶公好龙，他是叶公好龙式的喜欢的叶公好龙",
"画蛇添足，做了画蛇添足的事的画蛇添足",
"画龙点睛，这一笔起到画龙点睛作用的画龙点睛",
"滥竽充数，不能滥竽充数混日子的滥竽充数",
"自相矛盾，他的话自相矛盾的自相矛盾",
"亡羊补牢，及时亡羊补牢还不晚的亡羊补牢",
"坐井观天，不能坐井观天见识短浅的坐井观天",
"狐假虎威，他总是狐假虎威吓唬人的狐假虎威",
"黔驴技穷，到最后黔驴技穷的黔驴技穷",
"买椟还珠，犯了买椟还珠的错误的买椟还珠",
"邯郸学步，不要邯郸学步失去自我的邯郸学步",
"东施效颦，她东施效颦的样子很可笑的东施效颦",
"螳臂当车，别做螳臂当车的傻事的螳臂当车",
"蚍蜉撼树，这无异于蚍蜉撼树的蚍蜉撼树",
"飞蛾扑火，他飞蛾扑火般执着的飞蛾扑火",
"金蝉脱壳，成功金蝉脱壳逃脱的金蝉脱壳",
"蜻蜓点水，做事不能蜻蜓点水的蜻蜓点水",
"蛛丝马迹，发现了蛛丝马迹的蛛丝马迹",
"螳螂捕蝉黄雀在后，真是螳螂捕蝉黄雀在后的螳螂捕蝉黄雀在后",
"鹬蚌相争渔翁得利，结果鹬蚌相争渔翁得利的鹬蚌相争渔翁得利",
"塞翁失马焉知非福，经历了塞翁失马焉知非福的事的塞翁失马焉知非福",
"城门失火殃及池鱼，没想到城门失火殃及池鱼的城门失火殃及池鱼",
"近水楼台先得月，他近水楼台先得月的近水楼台先得月",
"树欲静而风不止，真是树欲静而风不止的树欲静而风不止",
"子欲养而亲不待，要避免子欲养而亲不待的遗憾的子欲养而亲不待",
"小不忍则乱大谋，记住小不忍则乱大谋的小不忍则乱大谋",
"勿以恶小而为之勿以善小而不为，要做到勿以恶小而为之勿以善小而不为的勿以恶小而为之勿以善小而不为",
"近朱者赤近墨者黑，果然近朱者赤近墨者黑的近朱者赤近墨者黑",
"出淤泥而不染，他出淤泥而不染的品质可贵的出淤泥而不染",
"濯清涟而不妖，莲花濯清涟而不妖的濯清涟而不妖",
"得道多助失道寡助，这体现了得道多助失道寡助的得道多助失道寡助",
"天时不如地利地利不如人和，明白天时不如地利地利不如人和道理的天时不如地利地利不如人和",
"居安思危，要时刻居安思危的居安思危",
"未雨绸缪，做事要未雨绸缪的未雨绸缪",
"防患未然，做到防患未然很重要的防患未然",
"临渊羡鱼不如退而结网，应该临渊羡鱼不如退而结网的临渊羡鱼不如退而结网",
"纸上谈兵，不能纸上谈兵只说不做的纸上谈兵",
"望洋兴叹，面对大海望洋兴叹的望洋兴叹",
"高瞻远瞩，要有高瞻远瞩的眼光的高瞻远瞩",
"高屋建瓴，他的见解高屋建瓴的高屋建瓴",
"高朋满座，家里高朋满座很热闹的高朋满座",
"高枕无忧，不能高枕无忧放松警惕的高枕无忧",
"高谈阔论，他们高谈阔论的样子很投入的高谈阔论",
"高风亮节，他高风亮节的品质令人敬佩的高风亮节",
"高山仰止，对他的才华高山仰止的高山仰止",
"高山流水，他们是高山流水般的知音的高山流水",
"高抬贵手，希望你高抬贵手的高抬贵手",
"高不可攀，这个目标高不可攀的高不可攀",
"高不成低不就，陷入高不成低不就的困境的高不成低不就",
"兴高采烈，他兴高采烈地玩耍的兴高采烈",
"趾高气扬，他趾高气扬的样子很讨厌的趾高气扬",
"眉飞色舞，她眉飞色舞地讲述的眉飞色舞",
"眉开眼笑，看到礼物眉开眼笑的眉开眼笑",
"眉来眼去，两人眉来眼去很暧昧的眉来眼去",
"眉清目秀，她眉清目秀很漂亮的眉清目秀",
"眉飞色舞，大家眉飞色舞讨论着的眉飞色舞",
"扬眉吐气，终于扬眉吐气的扬眉吐气",
"迫在眉睫，事情迫在眉睫要赶紧做的迫在眉睫",
"燃眉之急，解决燃眉之急的燃眉之急",
"愁眉苦脸，他愁眉苦脸的样子很可怜的愁眉苦脸",
"愁眉不展，整天愁眉不展的愁眉不展",
"慈眉善目，那位老人慈眉善目的慈眉善目",
"贼眉鼠眼，他贼眉鼠眼的样子不像好人的贼眉鼠眼",
"挤眉弄眼，他挤眉弄眼的搞怪的挤眉弄眼",
"低眉顺眼，她总是低眉顺眼的低眉顺眼",
"横眉冷对，他横眉冷对敌人的横眉冷对",
"举案齐眉，他们夫妻举案齐眉的举案齐眉",
"百媚千娇，她百媚千娇的样子很迷人的百媚千娇",
"千娇百媚，那位女子千娇百媚的千娇百媚",
"婀娜多姿，她跳舞婀娜多姿的婀娜多姿",
"亭亭玉立，她亭亭玉立站在那里的亭亭玉立",
"出水芙蓉，她如出水芙蓉般美丽的出水芙蓉",
"冰肌玉骨，她有着冰肌玉骨的冰肌玉骨",
"冰清玉洁，她冰清玉洁的品质可贵的冰清玉洁",
"闭月羞花，形容女子闭月羞花的闭月羞花",
"沉鱼落雁，她有着沉鱼落雁之貌的沉鱼落雁",
"国色天香，真正国色天香的国色天香",
"倾国倾城，她倾国倾城的倾国倾城",
"花容月貌，有着花容月貌的花容月貌",
"如花似玉，她如花似玉很动人的如花似玉",
"美若天仙，她美若天仙的美若天仙",
"天生丽质，她天生丽质的天生丽质",
"秀色可餐，她的容貌秀色可餐的秀色可餐",
"小家碧玉，她是小家碧玉般的女子的小家碧玉",
"大家闺秀，真正的大家闺秀的大家闺秀",
"豆蔻年华，正处于豆蔻年华的豆蔻年华",
"及笄之年，到了及笄之年的及笄之年",
"破瓜之年，处于破瓜之年的破瓜之年",
"桃李年华，在桃李年华的桃李年华",
"花信年华，正当年华的花信年华的花信年华",
"摽梅之年，到了摽梅之年的摽梅之年",
"半老徐娘，她半老徐娘风韵犹存的半老徐娘",
"风韵犹存，虽半老徐娘但风韵犹存的风韵犹存",
"徐娘半老，她徐娘半老的徐娘半老",
"人老珠黄，不能让人老珠黄的人老珠黄",
"老态龙钟，那位老人老态龙钟的老态龙钟",
"鹤发童颜，他鹤发童颜很精神的鹤发童颜",
"白发苍苍，他白发苍苍的样子的白发苍苍",
"面黄肌瘦，他面黄肌瘦营养不良的面黄肌瘦",
"面如土色，吓得面如土色的面如土色",
"面红耳赤，争论得面红耳赤的面红耳赤",
"面面相觑，大家面面相觑很惊讶的面面相觑",
"面目全非，事情变得面目全非的面目全非",
"面目可憎，他的行为面目可憎的面目可憎",
"满面春风，他满面春风心情好的满面春风",
"满面红光，他满面红光很有精神的满面红光",
"愁眉苦脸，遇到困难愁眉苦脸的愁眉苦脸",
"嬉皮笑脸，他总是嬉皮笑脸不严肃的嬉皮笑脸",
"嬉皮笑脸，不要总是嬉皮笑脸的嬉皮笑脸",
"嘻皮笑脸，他嘻皮笑脸的样子很调皮的嘻皮笑脸",
"皮笑肉不笑，他皮笑肉不笑很假的皮笑肉不笑" 
]

HEADERS = {
    'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 18_2_1 like Mac OS X) AppleWebKit/537.36 (KHTML, like Gecko) Version/18.2 Mobile/15E148 Safari/537.36',
    'Referer': 'https://t.leftsite.cn/'
}

BASE_URL = 'https://t.leftsite.cn/tts'
REQUEST_INTERVAL = 3  # 安全请求间隔
TIMEOUT = 15

def generate_filename(text):
    """生成纯中文文件名（示例：学.mp3）"""
    # 提取第一个汉字
    return f"{text.split('，')[0].strip()}.mp3"

def download_with_curl_format(text):
    """完全模拟curl请求格式"""
    try:
        # 构造与curl完全一致的参数
        params = {
            't': text,          # 保留完整文本
            'v': 'zh-CN-XiaoxiaoNeural',
            'r': 0,            # 与curl示例一致的参数
            'p': 0
        }
        
        # 生成文件名
        filename = generate_filename(text)
        
        print(f"正在请求：{text}")

        # 发送请求（关闭自动编码）
        response = requests.request(
            'GET',
            BASE_URL,
            params=params,
            headers=HEADERS,
            timeout=TIMEOUT
        )

        # 调试输出
        print(f"实际请求URL:\n{response.url}\n")

        # 验证响应
        if response.status_code == 200:
            if 'audio/mpeg' in response.headers.get('Content-Type', ''):
                with open(filename, 'wb') as f:
                    f.write(response.content)
                print(f"✅ 成功保存：{filename}")
                return True
            else:
                print(f"❌ 无效内容类型：{response.headers.get('Content-Type')}")
        else:
            print(f"❌ 请求失败 HTTP {response.status_code}")

    except Exception as e:
        print(f"⚠️ 下载失败：{str(e)}")
    
    return False

def main():
    """批量下载主程序"""
    total = len(DATA)
    success = 0
    
    for index, text in enumerate(DATA, 1):
        print(f"\n进度 ({index}/{total})")
        if download_with_curl_format(text):
            success += 1
        time.sleep(REQUEST_INTERVAL)
    
    print(f"\n下载完成！成功 {success}/{total} 个文件")

if __name__ == "__main__":
    main()