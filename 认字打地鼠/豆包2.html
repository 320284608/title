<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰Ω≥ÊÅí‚úèÔ∏èËÆ§Â≠óüî®ÊâìÂú∞Èº†</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B35',
                        secondary: '#4CAF50'
                    },
                    borderRadius: {
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                        'button': '8px'
                    }
                }
            }
        }
    </script>
    <style>
        :root {
            --bg-color: #FFF8E1;
            --text-color: #333333;
            --card-bg: #FFFFFF;
            --hole-bg: radial-gradient(circle at center 70%, #5D4037 0%, #3E2723 100%);
        }

        body.dark-theme {
            --bg-color: #121212;
            --text-color: #E0E0E0;
            --card-bg: #1E1E1E;
            --hole-bg: radial-gradient(circle at center 70%, #3E2723 0%, #1E1E1E 100%);
        }

        body.eye-care-theme {
            --bg-color: #E8F5E9;
            --text-color: #2E7D32;
            --card-bg: #F1F8E9;
            --hole-bg: radial-gradient(circle at center 70%, #558B2F 0%, #33691E 100%);
        }

        body.colorful-theme {
            --bg-color: #E3F2FD;
            --text-color: #1565C0;
            --card-bg: #BBDEFB;
            --hole-bg: radial-gradient(circle at center 70%, #5D4037 0%, #3E2723 100%);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }

        .bg-theme-card {
            background-color: var(--card-bg);
        }

        .hole {
            background: var(--hole-bg);
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">
    <style>
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }

        @keyframes moleUp {
            0% {
                transform: translateY(100%);
            }

            10% {
                transform: translateY(0);
            }

            80% {
                transform: translateY(0);
            }

            100% {
                transform: translateY(100%);
            }
        }

        @keyframes scoreUp {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(-30px);
                opacity: 0;
            }
        }

        @keyframes scoreDown {
            0% {
                transform: translateY(0);
                opacity: 1;
            }

            100% {
                transform: translateY(30px);
                opacity: 0;
            }
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        @keyframes particle {
            0% {
                transform: translate(0, 0);
                opacity: 1;
            }

            100% {
                transform: translate(var(--x), var(--y));
                opacity: 0;
            }
        }

        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            animation: particle 0.8s ease-out forwards;
        }

        .mole-animation {
            animation: moleUp 2.5s ease-in-out;
        }

        .score-up {
            animation: scoreUp 0.8s ease-out forwards;
        }

        .score-down {
            animation: scoreDown 0.8s ease-out forwards;
        }

        .shake {
            animation: shake 0.3s ease-in-out;
        }

        .hole {
            background: radial-gradient(circle at center 70%, #5D4037 0%, #3E2723 100%);
            box-shadow: inset 0 10px 20px rgba(0, 0, 0, 0.5);
        }

        body {
            touch-action: manipulation;
            user-select: none;
        }
    </style>
</head>

<body class="font-sans h-screen overflow-hidden">
    <!-- Ê∏∏ÊàèÁïåÈù¢ -->
    <div id="game-container" class="relative h-screen w-full flex flex-col">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <nav class="fixed w-full top-0 bg-primary text-white py-2 px-3 flex items-center z-10 shadow-md">
            <div class="flex-1 flex items-center">
                <div class="w-5 h-5 flex items-center justify-center mr-1">
                    <i class="ri-timer-line"></i>
                </div>
                <div id="timer" class="text-base font-bold">60</div>
            </div>
            <div class="flex-1 text-center">
                <span class="font-['Pacifico'] text-base">logo</span>
            </div>
            <div class="flex-1 flex items-center justify-end">
                <div class="w-5 h-5 flex items-center justify-center mr-1">
                    <i class="ri-trophy-line"></i>
                </div>
                <div id="score" class="text-base font-bold">0</div>
            </div>
        </nav>
        <!-- ÁõÆÊ†áÊñáÂ≠óÂå∫Âüü -->
        <div class="mt-10 pt-1 pb-1 px-3 bg-theme-card shadow-md">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <span class="text-gray-600 mr-1 text-xs">ÈöæÂ∫¶:</span>
                    <span id="difficulty-display" class="text-primary font-medium text-xs">ÂàùÁ∫ß</span>
                </div>
                <div class="flex items-center justify-center">
                    <div id="target-word" class="text-2xl font-bold text-gray-800 mr-2">Â≠¶</div>
                    <button id="play-sound" class="w-7 h-7 flex items-center justify-center bg-primary text-white rounded-full shadow-md cursor-pointer !rounded-button">
                        <i class="ri-volume-up-line"></i>
                    </button>
                </div>
                <div class="flex items-center">
                    <span class="text-gray-600 mr-1 text-xs">Êú∫‰ºö:</span>
                    <span id="chances-display" class="text-primary font-medium text-xs">2</span>
                </div>
            </div>
            <div id="combo-display" class="h-4 text-amber-600 font-bold text-xs text-center"></div>
        </div>
        <!-- Âú∞Èº†Ê¥ûÂå∫Âüü -->
        <div class="flex-1 px-2 py-2 overflow-hidden">
            <div id="holes-container" class="grid grid-cols-3 gap-3 h-full">
                <!-- Âú∞Èº†Ê¥ûÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        <!-- Â∫ïÈÉ®Ê†áÁ≠æÊ†è -->
<div class="fixed w-full bottom-0 bg-theme-card border-t border-gray-200 grid grid-cols-4 text-xs text-gray-600">
  <button id="restart-btn" class="flex flex-col items-center justify-center py-2 cursor-pointer !rounded-button">
    <div class="w-6 h-6 flex items-center justify-center mb-1">
      <i class="ri-restart-line ri-lg text-primary"></i>
    </div>
    <span>ÈáçÊñ∞ÂºÄÂßã</span>
  </button>
  <button id="home-btn" class="flex flex-col items-center justify-center py-2 cursor-pointer !rounded-button">
    <div class="w-6 h-6 flex items-center justify-center mb-1">
      <i class="ri-home-line ri-lg text-gray-600"></i>
    </div>
    <span>È¶ñÈ°µ</span>
  </button>
  <button id="settings-btn" class="flex flex-col items-center justify-center py-2 cursor-pointer !rounded-button">
    <div class="w-6 h-6 flex items-center justify-center mb-1">
      <i class="ri-settings-line ri-lg text-gray-600"></i>
    </div>
    <span>ËÆæÁΩÆ</span>
  </button>
  <button id="speed-btn" class="flex flex-col items-center justify-center py-2 cursor-pointer !rounded-button">
    <div class="w-6 h-6 flex items-center justify-center mb-1">
      <i class="ri-speed-line ri-lg text-gray-600"></i>
    </div>
    <span>ÈÄüÂ∫¶Ë∞ÉËäÇ</span>
  </button>
</div>
<!-- ÈÄüÂ∫¶Ë∞ÉËäÇÂºπÁ™ó -->
<div id="speed-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20 hidden">
  <div class="bg-theme-card rounded-lg w-5/6 max-w-md p-6 shadow-xl">
    <h2 class="text-2xl font-bold text-center mb-4">ÈÄüÂ∫¶Ë∞ÉËäÇ</h2>
    <div class="grid grid-cols-1 gap-3 mb-6">
      <button data-speed="slow" class="speed-btn bg-green-100 hover:bg-green-200 text-green-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
        <div class="flex justify-between items-center">
          <span class="font-bold">ÊÖ¢ÈÄü</span>
          <span class="text-xs bg-green-200 text-green-800 py-1 px-2 rounded-full">3.5Áßí</span>
        </div>
      </button>
      <button data-speed="medium" class="speed-btn bg-blue-100 hover:bg-blue-200 text-blue-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
        <div class="flex justify-between items-center">
          <span class="font-bold">‰∏≠ÈÄü</span>
          <span class="text-xs bg-blue-200 text-blue-800 py-1 px-2 rounded-full">2.5Áßí</span>
        </div>
      </button>
      <button data-speed="fast" class="speed-btn bg-red-100 hover:bg-red-200 text-red-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
        <div class="flex justify-between items-center">
          <span class="font-bold">Âø´ÈÄü</span>
          <span class="text-xs bg-red-200 text-red-800 py-1 px-2 rounded-full">1.5Áßí</span>
        </div>
      </button>
    </div>
    <div class="flex justify-center">
      <button id="close-speed" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-6 rounded-lg cursor-pointer !rounded-button">
        ÂÖ≥Èó≠
      </button>
    </div>
  </div>
</div>

    </div>
    <!-- ÈöæÂ∫¶ÈÄâÊã©ÂºπÁ™ó -->
    <div id="difficulty-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20 hidden">
        <div class="bg-theme-card rounded-lg w-5/6 max-w-md p-6 shadow-xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">ÈÄâÊã©ÈöæÂ∫¶</h2>
            <div class="grid grid-cols-1 gap-3 mb-6">
                <button data-level="1" class="difficulty-btn bg-green-100 hover:bg-green-200 text-green-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">ÂàùÁ∫ß</span>
                        <span class="text-xs bg-green-200 text-green-800 py-1 px-2 rounded-full">400Â≠óÂ∑¶Âè≥</span> <!-- ‰øÆÊîπ‰∏∫ÂÆûÈôÖÂ≠óÊï∞ÊèèËø∞ -->
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Âü∫Á°ÄÊ±âÂ≠óÔºåÈÄÇÂêàÂàùÂ≠¶ËÄÖ</p>
                </button>
                <button data-level="2" class="difficulty-btn bg-blue-100 hover:bg-blue-200 text-blue-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">‰∏≠Á∫ß</span>
                        <span class="text-xs bg-blue-200 text-blue-800 py-1 px-2 rounded-full">50ËØç</span>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Â∏∏Áî®ËØçËØ≠ÔºåÊèêÂçáËØçÊ±áÈáè</p>
                </button>
                <button data-level="3" class="difficulty-btn bg-yellow-100 hover:bg-yellow-200 text-yellow-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">È´òÁ∫ß</span>
                        <span class="text-xs bg-yellow-200 text-yellow-800 py-1 px-2 rounded-full">20Êù°</span>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">ÊàêËØ≠Ë∞öËØ≠ÔºåÂ¢ûÂº∫ËØ≠Ë®ÄË°®Ëææ</p>
                </button>
                <button data-level="4" class="difficulty-btn bg-purple-100 hover:bg-purple-200 text-purple-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">ËøõÈò∂</span>
                        <span class="text-xs bg-purple-200 text-purple-800 py-1 px-2 rounded-full">30ÁªÑ</span>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">Â§öÈü≥Â≠óÔºåÊèêÈ´òËæ®Èü≥ËÉΩÂäõ</p>
                </button>
                <button data-level="5" class="difficulty-btn bg-red-100 hover:bg-red-200 text-red-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button">
                    <div class="flex justify-between items-center">
                        <span class="font-bold">ÁªàÊûÅ</span>
                        <span class="text-xs bg-red-200 text-red-800 py-1 px-2 rounded-full">10Â≠ó</span>
                    </div>
                    <p class="text-xs text-gray-600 mt-1">ÁîüÂÉªÂ≠óÔºåÊåëÊàòÊûÅÈôê</p>
                </button>
            </div>
            <div class="flex justify-center">
                <button id="close-difficulty" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-6 rounded-lg cursor-pointer !rounded-button">
                    ÂÖ≥Èó≠
                </button>
            </div>
        </div>
    </div>
            <!-- ËÆæÁΩÆÂºπÁ™ó -->
    <div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20 hidden">
        <div class="bg-theme-card rounded-lg w-5/6 max-w-md p-6 shadow-xl">
            <h2 class="text-2xl font-bold text-center mb-4">ËÆæÁΩÆ</h2>
            <div class="mb-6">
                <h3 class="text-lg font-semibold mb-3">‰∏ªÈ¢òËÆæÁΩÆ</h3>
                <div class="grid grid-cols-2 gap-3">
                    <button data-theme="default" class="theme-btn bg-amber-50 hover:bg-amber-100 text-amber-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button border-2 border-transparent">
                        <div class="flex justify-between items-center">
                            <span class="font-bold">ÈªòËÆ§‰∏ªÈ¢ò</span>
                            <div class="w-5 h-5 flex items-center justify-center">
                                <i class="ri-check-line ri-lg theme-check hidden"></i>
                            </div>
                        </div>
                    </button>
                    <button data-theme="dark" class="theme-btn bg-gray-800 hover:bg-gray-700 text-gray-200 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button border-2 border-transparent">
                        <div class="flex justify-between items-center">
                            <span class="font-bold">Â§úÈó¥Ê®°Âºè</span>
                            <div class="w-5 h-5 flex items-center justify-center">
                                <i class="ri-check-line ri-lg theme-check hidden"></i>
                            </div>
                        </div>
                    </button>
                    <button data-theme="eye-care" class="theme-btn bg-green-100 hover:bg-green-200 text-green-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button border-2 border-transparent">
                        <div class="flex justify-between items-center">
                            <span class="font-bold">Êä§ÁúºÊ®°Âºè</span>
                            <div class="w-5 h-5 flex items-center justify-center">
                                <i class="ri-check-line ri-lg theme-check hidden"></i>
                            </div>
                        </div>
                    </button>
                    <button data-theme="colorful" class="theme-btn bg-blue-100 hover:bg-blue-200 text-blue-800 py-3 px-4 rounded-lg text-left relative cursor-pointer !rounded-button border-2 border-transparent">
                        <div class="flex justify-between items-center">
                            <span class="font-bold">Â§öÂΩ©Ê®°Âºè</span>
                            <div class="w-5 h-5 flex items-center justify-center">
                                <i class="ri-check-line ri-lg theme-check hidden"></i>
                            </div>
                        </div>
                    </button>
                </div>
            </div>
            <div class="flex justify-center">
                <button id="close-settings" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-6 rounded-lg cursor-pointer !rounded-button">
                    ÂÖ≥Èó≠
                </button>
            </div>
        </div>
    </div>
    <!-- Ê∏∏ÊàèÁªìÁÆóÂºπÁ™ó -->
    <div id="result-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20 hidden">
        <div class="bg-theme-card rounded-lg w-5/6 max-w-md p-6 shadow-xl">
            <h2 class="text-2xl font-bold text-center mb-2">Ê∏∏ÊàèÁªìÊùü</h2>
            <div class="text-center mb-6">
                <div class="text-5xl font-bold text-primary my-4" id="final-score">0</div>
                <p class="text-gray-600">ÊúÄÁªàÂæóÂàÜ</p>
            </div>
            <div class="grid grid-cols-2 gap-4 mb-6">
                <div class="bg-gray-100 p-3 rounded-lg">
                    <p class="text-xs text-gray-600">ÈöæÂ∫¶</p>
                    <p class="font-bold text-gray-800" id="result-difficulty">ÂàùÁ∫ß</p>
                </div>
                <div class="bg-gray-100 p-3 rounded-lg">
                    <p class="text-xs text-gray-600">Áî®Êó∂</p>
                    <p class="font-bold text-gray-800" id="result-time">60Áßí</p>
                </div>
                <div class="bg-gray-100 p-3 rounded-lg">
                    <p class="text-xs text-gray-600">Ê≠£Á°ÆÁéá</p>
                    <p class="font-bold text-gray-800" id="result-accuracy">0%</p>
                </div>
                <div class="bg-gray-100 p-3 rounded-lg">
                    <p class="text-xs text-gray-600">ÊúÄÈ´òËøûÂáª</p>
                    <p class="font-bold text-gray-800" id="result-combo">0</p>
                </div>
            </div>
            <div class="flex justify-between">
                <button id="back-to-difficulty" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg cursor-pointer !rounded-button">
                    ÈÄâÊã©ÈöæÂ∫¶
                </button>
                <button id="play-again" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-6 rounded-lg cursor-pointer !rounded-button">
                    ÂÜçÁé©‰∏ÄÊ¨°
                </button>
            </div>
        </div>
    </div>
    <script>
        // Ê∏∏ÊàèÊï∞ÊçÆ
        const gameData = {
            levels: [{
                    name: "ÂàùÁ∫ß",
                    words: ["Â≠¶", "‰π†", "Â•Ω", "‰∫∫", "Â§ß", "Â∞è", "‰∏ä", "‰∏ã", "‰∏≠", "ÂõΩ", "Â§©", "Âú∞", "Êó•", "Êúà", "Ê∞¥", "ÁÅ´", "Â±±", "Êú®", "Âè£", "Êâã", "ÂøÉ", "ÁõÆ", "ËÄ≥", "Èºª", "ÂÆ∂", "‰π¶", "ËΩ¶", "Èó®", "È±º", "È∏ü", "Ëô´", "È©¨", "Áâõ", "Áæä", "Áå´", "Áãó", "ÂÖî", "Èæô", "Ëä±", "Ëçâ", "Ê†ë", "Á±≥", "Èù¢", "Ëèú", "Êûú", "Ëå∂", "Ê∞¥", "È£é", "Èõ®", "Èõ™", "‰∫ë", "Áîµ", "Ë∑Ø", "Ê°•", "Êµ∑", "Ê≤≥", "Êπñ", "Ê±ü", "Âüé", "Áà∏", "Â¶à", "Áà∑", "Â•∂", "Âì•", "Âßê", "Âºü", "Â¶π", "Ê°å", "Ê§Ö", "Â∫ä", "Ë¢´", "Êûï", "ÁÅØ", "Á¨î", "Á∫∏", "Êú¨", "ÂàÄ", "Â∞∫", "ÁêÉ", "Êãç", "Áª≥", "Èíü", "Ë°®", "‰ºû", "Â∏Ω", "Ë°£", "Ë£§", "Èûã", "Ë¢ú", "ÈîÖ", "Á¢ó", "Á≠∑", "Âã∫", "Âèâ", "Áì∂", "ÊùØ", "Áõò", "ÁõÜ", "Ê°∂", "Ë¢ã", "ÂåÖ", "ÁÆ±", "ÈîÅ", "Èí•", "Èíâ", "Èî§", "Êñß", "ÈîØ", "ÈîÑ", "Èï∞", "Ê¢Ø", "Âá≥", "Ê¢Ø", "Êâá", "Èïú", "Ê¢≥", "Âà∑", "ÁöÇ", "È¶ô", "Ê≤π", "Áõê", "Á≥ñ", "ÈÖ±", "ÈÜã", "Â•∂", "Ëõã", "Ë±Ü", "Áìú", "ËåÑ", "Ê§í", "Ëë±", "Âßú", "Ëíú", "ËçØ", "Èíà", "Á∫ø", "Â∏É", "ÊØõ", "ÁöÆ", "Áü≥", "Ê≤ô", "Âúü", "Ê≥•", "ÁÅ∞", "ÁÉü", "Èõæ", "ÂÜ∞", "Èúú", "Êòü", "Ëæ∞", "ÂÖâ", "Êòé", "Êöó", "Èªë", "ÁôΩ", "Á∫¢", "Áªø", "ÈªÑ", "Ëìù", "Á¥´", "Ê©ô", "Á≤â", "Ê£ï", "ÁÅ∞", "Èáë", "Èì∂", "Ê°å", "Ê§Ö", "Â∫ä", "Êüú", "Á™ó", "Â∏ò", "Èíü", "Ë°®", "Áîª", "‰π¶", "Êû∂", "Á¨î", "Â¢®", "Á∫∏", "Á†ö", "Áê¥", "Ê£ã", "‰π¶", "Áîª", "Ëä±", "È∏ü", "È±º", "Ëô´", "Â±±", "Ê∞¥", "‰∫ë", "Èúû", "Èõ∑", "Áîµ", "È£é", "Èõ®", "Èõ™", "Èúú", "ÂÜ∞", "ÁÅ´", "Âúü", "Áü≥", "Èáë", "Êú®", "Ê∞¥", "ÁÅ´", "Âúü", "Êó•", "Êúà", "Êòü", "Á©∫", "Êµ∑", "Ê¥ã", "Ê≤≥", "Ê±ü", "Êπñ", "Ê∫™", "Ë∞∑", "Â≥∞", "Â≤≠", "‰∏ò", "Âéü", "Â∑ù", "Áî∞", "Âõ≠", "Êûó", "Ê£Æ", "Êûú", "Ëî¨", "Á≤Æ", "Ë∞∑", "Ë±Ü", "Á±≥", "Èù¢", "Ê≤π", "Áõê", "Á≥ñ", "ÈÖ±", "ÈÜã", "Ëå∂", "ÈÖí", "Â•∂", "Ëõã", "ËÇâ", "È±º", "Ëôæ", "Ëüπ", "Ë¥ù", "Ëèá", "Ëèå", "ËçØ", "Êùê", "Ëä±", "Ëçâ", "Ê†ë", "Êú®", "Ê†π", "Ëåé", "Âè∂", "Êûù", "ËäΩ", "Ëïæ", "Á±Ω", "ÁöÆ", "ÊØõ", "ÁæΩ", "Ëßí", "Áâô", "È™®", "Ë°Ä", "ËÇâ", "ÂøÉ", "ËÇù", "ËÑæ", "ËÇ∫", "ËÇæ", "ËÇ†", "ËÉÉ", "ËÑë", "Áúº", "ËÄ≥", "Èºª", "Âò¥", "Ëàå", "Áâô", "Âîá", "Êâã", "Ë∂≥", "ËÖø", "ËáÇ", "ËÇ©", "ËÉå", "ËÖ∞", "ËÇö", "ËÜù", "ËÇò", "ËÖï", "Êåá", "Ë∂æ", "Âèë", "È°ª", "Áúâ", "Ê±ó", "Ê≥™", "Ê∂ï", "Â±é", "Â∞ø", "Â±Å", "Â£∞", "Èü≥", "Ê≠å", "Ëàû", "ËØó", "ËØç", "‰π¶", "Êñá", "Â≠ó", "Êï∞", "ÁêÜ", "Âåñ", "Áîü", "Âú∞", "ÂéÜ", "Êîø", "Áæé", "‰Ωì", "Âä≥", "Áßë", "ÊäÄ", "ÁΩë", "Áîµ", "Êú∫", "ËΩ¶", "Ëàπ", "È£û", "ÁÇÆ", "Êû™", "Âºπ", "ËçØ", "ÂÖµ", "Â∞Ü", "Â∏Ö", "ÂõΩ", "ÂÆ∂", "Ê∞ë", "Êóè", "ÂÖö", "Á§æ", "‰ºö", "Ê≥ï", "Âæã", "ËßÑ", "Âàô", "ÂÖ¨", "Âπ≥", "Ê≠£", "‰πâ", "ÈÅì", "Âæ∑", "Á§º", "‰ª™", "Âªâ", "ËÄª", "Ëç£", "Ëæ±", "ÂØå", "Ë¥´", "Ë¥µ", "Ë¥±", "Á¶è", "Á•∏", "Âêâ", "Âá∂", "Âñú", "ÊÄí", "ÂìÄ", "‰πê"]
                },
                {
                    name: "‰∏≠Á∫ß",
                    words: ["Â≠¶‰π†", "Â∑•‰Ωú", "ÁîüÊ¥ª", "ÊúãÂèã", "ÂÆ∂‰∫∫", "ËÄÅÂ∏à", "Â≠¶Áîü", "ÂåªÁîü", "Ë≠¶ÂØü", "Âè∏Êú∫", "ÂïÜÂ∫ó", "ÂÖ¨Âõ≠", "Â≠¶Ê†°", "ÂåªÈô¢", "Èì∂Ë°å", "È§êÂéÖ", "ÁîµÂΩ±", "Èü≥‰πê", "ËøêÂä®", "Ê∏∏Êàè", "ÁîµËÑë", "ÊâãÊú∫", "ÁîµËßÜ", "Ê±ΩËΩ¶", "È£ûÊú∫", "ÁÅ´ËΩ¶", "Âú∞ÈìÅ", "ÂÖ¨‰∫§", "Êó©È§ê", "ÂçàÈ§ê", "ÊôöÈ§ê", "Ê∞¥Êûú", "Ëî¨Ëèú", "ËÇâÁ±ª", "Êµ∑È≤ú", "ÁîúÁÇπ", "È•ÆÊñô", "ÂíñÂï°", "Ëå∂Âè∂", "Â§©Ê∞î", "Â≠£ËäÇ", "Êò•Â§©", "Â§èÂ§©", "ÁßãÂ§©", "ÂÜ¨Â§©", "ËäÇÊó•", "ÁîüÊó•", "Êñ∞Âπ¥", "‰∏≠Áßã", "ÂõΩÂ∫Ü"]
                },
                {
                    name: "È´òÁ∫ß",
                    words: ["‰∏Ä‰∏æ‰∏§Âæó", "ÂõõÈù¢ÂÖ´Êñπ", "‰∫îÈ¢úÂÖ≠Ëâ≤", "‰∏É‰∏äÂÖ´‰∏ã", "‰πùÁâõ‰∏ÄÊØõ", "ÂçÅÂÖ®ÂçÅÁæé", "ÁôæÂèëÁôæ‰∏≠", "ÂçÉÂèò‰∏áÂåñ", "‰∏áÁ¥´ÂçÉÁ∫¢", "‰∏âÂøÉ‰∫åÊÑè", "Âçä‰ø°ÂçäÁñë", "Ëá™Ë®ÄËá™ËØ≠", "Ëá™‰ΩúËá™Âèó", "ÂâçÂõ†ÂêéÊûú", "‰∏úÂº†Ë•øÊúõ", "ÂçóËæïÂåóËæô", "Â∑¶ÊÄùÂè≥ÊÉ≥", "ÊúâÂßãÊúâÁªà", "Êó†ÂΩ±Êó†Ë∏™", "Â§©ÈïøÂú∞‰πÖ"]
                },
                {
                    name: "ËøõÈò∂",
                    words: ["Ë°å", "‰πê", "Èïø", "Âæó", "Â•Ω", "Â§ß", "Ëßâ", "ÁùÄ", "Èáç", "‰∏∫", "ÁúÅ", "Ëøò", "Âú∞", "Âºπ", "Êï∞", "Á©∫", "Âíå", "Ë∞É", "Â∞ë", "Âè™", "Á≥ª", "ÂÅá", "Èöæ", "Èáè", "Âèë", "Êäò", "Â•á", "Èó¥", "Ëß£", "ÂàÜ"]
                },
                {
                    name: "ÁªàÊûÅ",
                    words: ["Èæò", "È¨ª", "Èë´", "È∫§", "ÈΩâ", "È∏Ø", "È¨£", "È±ª", "È¨ü", "È∏æ"]
                }
            ],
            speed: "medium", // Ê∑ªÂä†ÈÄüÂ∫¶Â±ûÊÄßÔºåÈªòËÆ§‰∏≠ÈÄü
            currentLevel: 0,
            targetWord: "",
            currentWordIndex: 0,
            remainingChances: 5,
            score: 0,
            timer: 800, // ‰øÆÊîπÂàùÁ∫ßÊ®°ÂºèÁöÑÂàùÂßãÊó∂Èó¥‰∏∫800Áßí
            gameActive: false,
            correctHits: 0,
            wrongHits: 0,
            combo: 0,
            maxCombo: 0,
            activeMoles: []
        };

        // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
        function resetGame() {
            gameData.score = 0;
            gameData.timer = 800; // ‰øÆÊîπËøôÈáåÁöÑÊó∂Èó¥‰∏∫800Áßí
            gameData.correctHits = 0;
            gameData.wrongHits = 0;
            gameData.combo = 0;
            gameData.maxCombo = 0;
            gameData.gameActive = false;
            gameData.activeMoles = [];
            gameData.currentWordIndex = 0;
            gameData.remainingChances = 2;
            elements.scoreDisplay.textContent = "0";
            elements.timerDisplay.textContent = "800"; // ‰øÆÊîπËøôÈáåÁöÑÂàùÂßãÊòæÁ§∫Êó∂Èó¥‰∏∫800
            elements.comboDisplay.textContent = "";
            elements.chancesDisplay.textContent = "2";
            // ÈöêËóèÊâÄÊúâÂú∞Èº†
            document.querySelectorAll(".mole").forEach(mole => {
                mole.classList.remove("mole-animation");
                mole.style.transform = "translateY(100%)";
                const wordBubble = mole.querySelector(".word-bubble");
                wordBubble.classList.add("hidden");
                wordBubble.textContent = "";
            });
        }

        // DOMÂÖÉÁ¥†
        const elements = {
            gameContainer: document.getElementById("game-container"),
            holesContainer: document.getElementById("holes-container"),
            timerDisplay: document.getElementById("timer"),
            scoreDisplay: document.getElementById("score"),
            targetWordDisplay: document.getElementById("target-word"),
            difficultyDisplay: document.getElementById("difficulty-display"),
            chancesDisplay: document.getElementById("chances-display"),
            comboDisplay: document.getElementById("combo-display"),
            difficultyModal: document.getElementById("difficulty-modal"),
            settingsModal: document.getElementById("settings-modal"),
            resultModal: document.getElementById("result-modal"),
            finalScoreDisplay: document.getElementById("final-score"),
            resultDifficultyDisplay: document.getElementById("result-difficulty"),
            resultTimeDisplay: document.getElementById("result-time"),
            resultAccuracyDisplay: document.getElementById("result-accuracy"),
            resultComboDisplay: document.getElementById("result-combo"),
            playSound: document.getElementById("play-sound"),
            restartBtn: document.getElementById("restart-btn"),
            homeBtn: document.getElementById("home-btn"),
            settingsBtn: document.getElementById("settings-btn"),
            rankBtn: document.getElementById("rank-btn")
        };

        // ÂàùÂßãÂåñÊ∏∏Êàè
        function initGame() {
            createHoles(12);
            showDifficultyModal();
            // ËÆæÁΩÆÂΩìÂâç‰∏ªÈ¢ò
            setTheme('default');
            // ‰∫ã‰ª∂ÁõëÂê¨
            document.querySelectorAll(".difficulty-btn").forEach(btn => {
                btn.addEventListener("click", () => {
                    gameData.currentLevel = parseInt(btn.dataset.level) - 1;
                    elements.difficultyDisplay.textContent = gameData.levels[gameData.currentLevel].name;
                    elements.difficultyModal.classList.add("hidden");
                    startGame();
                });
            });
            document.getElementById("close-difficulty").addEventListener("click", () => {
                elements.difficultyModal.classList.add("hidden");
            });
            document.getElementById("play-again").addEventListener("click", () => {
                elements.resultModal.classList.add("hidden");
                startGame();
            });
            document.getElementById("back-to-difficulty").addEventListener("click", () => {
                elements.resultModal.classList.add("hidden");
                showDifficultyModal();
            });
            elements.playSound.addEventListener("click", () => {
                playWordSound(gameData.targetWord);
            });
            elements.restartBtn.addEventListener("click", () => {
                if (gameData.gameActive) {
                                // ÂàõÂª∫Ëá™ÂÆö‰πâÁ°ÆËÆ§ÂØπËØùÊ°Ü
            const confirmDialog = document.createElement('div');
            confirmDialog.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-30';
            confirmDialog.innerHTML = `
<div class="bg-theme-card rounded-lg w-5/6 max-w-md p-5 shadow-xl">
<h3 class="text-xl font-bold text-gray-800 mb-3 text-center">ÊèêÁ§∫</h3>
<p class="text-gray-600 mb-5 text-center">Á°ÆÂÆöË¶ÅÊîæÂºÉÂΩìÂâçÊ∏∏ÊàèÂπ∂ÈáçÊñ∞ÂºÄÂßãÂêóÔºü</p>
<div class="flex justify-center gap-4">
<button id="cancel-restart" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-5 rounded-lg cursor-pointer !rounded-button">
ÂèñÊ∂à
</button>
<button id="confirm-restart" class="bg-primary hover:bg-primary/90 text-white font-medium py-2 px-5 rounded-lg cursor-pointer !rounded-button">
Á°ÆÂÆö
</button>
</div>
</div>
`;
                    document.body.appendChild(confirmDialog);
                    // Ê∑ªÂä†ÊåâÈíÆ‰∫ã‰ª∂
                    document.getElementById('cancel-restart').addEventListener('click', () => {
                        document.body.removeChild(confirmDialog);
                    });
                    document.getElementById('confirm-restart').addEventListener('click', () => {
                        document.body.removeChild(confirmDialog);
                        startGame();
                    });
                } else {
                    startGame();
                }
            });
            elements.homeBtn.addEventListener("click", showDifficultyModal);
            elements.settingsBtn.addEventListener("click", showSettingsModal);
            document.getElementById("close-settings").addEventListener("click", () => {
                elements.settingsModal.classList.add("hidden");
            });
            document.querySelectorAll(".theme-btn").forEach(btn => {
                btn.addEventListener("click", () => {
                    const theme = btn.dataset.theme;
                    setTheme(theme);
                });
            });
            
        }
        // ÊòæÁ§∫ËÆæÁΩÆÂºπÁ™ó
        function showSettingsModal() {
            elements.settingsModal.classList.remove("hidden");
        }
        // ËÆæÁΩÆ‰∏ªÈ¢ò
        function setTheme(theme) {
            // ÁßªÈô§ÊâÄÊúâ‰∏ªÈ¢òÁ±ª
            document.body.classList.remove('dark-theme', 'eye-care-theme', 'colorful-theme');
            // Ê∑ªÂä†ÈÄâ‰∏≠ÁöÑ‰∏ªÈ¢òÁ±ª
            if (theme !== 'default') {
                document.body.classList.add(`${theme}-theme`);
            }
            // Êõ¥Êñ∞‰∏ªÈ¢òÊåâÈíÆÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.theme-btn').forEach(btn => {
                const check = btn.querySelector('.theme-check');
                if (btn.dataset.theme === theme) {
                    btn.classList.add('border-primary');
                    check.classList.remove('hidden');
                } else {
                    btn.classList.remove('border-primary');
                    check.classList.add('hidden');
                }
            });
        }
        // ÂàõÂª∫Âú∞Èº†Ê¥û
        function createHoles(count) {
            elements.holesContainer.innerHTML = "";
            for (let i = 0; i < count; i++) {
                const hole = document.createElement("div");
                hole.className = "hole relative rounded-full aspect-square flex items-center justify-center overflow-hidden";
                hole.dataset.index = i;
                // ÂàõÂª∫Âú∞Èº†ÂÆπÂô®ÔºàÂàùÂßãÈöêËóèÔºâ
                const mole = document.createElement("div");
                mole.className = "mole absolute bottom-0 w-full h-full translate-y-full";
                mole.innerHTML = `
<div class="relative h-full flex flex-col items-center justify-end pb-2">
<div class="word-bubble hidden absolute top-1 bg-white rounded-full px-2 py-1 shadow-md text-base font-bold"></div>
<div class="mole-image w-2/3 h-1/2">
<img src="https://readdy.ai/api/search-image?query=cute%20cartoon%20mole%20character%20with%20big%20eyes%2C%20smiling%2C%20digital%20art%20style%2C%20isolated%20on%20transparent%20background%2C%20the%20mole%20should%20take%20up%2070%25%20of%20the%20frame%2C%20centered%20composition&width=200&height=200&seq=mole1&orientation=squarish" alt="Âú∞Èº†" class="w-full h-full object-contain">
</div>
</div>
`;
                hole.appendChild(mole);
                elements.holesContainer.appendChild(hole);
                // Ê∑ªÂä†ÁÇπÂáª‰∫ã‰ª∂
                hole.addEventListener("click", handleMoleClick);
            }
        }
        // ÊòæÁ§∫ÈöæÂ∫¶ÈÄâÊã©ÂºπÁ™ó
        function showDifficultyModal() {
            resetGame();
            elements.difficultyModal.classList.remove("hidden");
        }
        // ÂºÄÂßãÊ∏∏Êàè
        function startGame() {
            resetGame();
            gameData.gameActive = true;
            // Ê†πÊçÆÂΩìÂâçÈöæÂ∫¶Á∫ßÂà´ËÆæÁΩÆÂàùÂßãÊó∂Èó¥
            if (gameData.currentLevel === 0) { // ÂàùÁ∫ßÊ®°ÂºèÂØπÂ∫îÁöÑÁ¥¢ÂºïÊòØ0
                gameData.timer = 800;
            } else {
                gameData.timer = 60;
            }
            elements.timerDisplay.textContent = gameData.timer;
            setNewTargetWord();
            // ÂºÄÂßãÂÄíËÆ°Êó∂
            const timerInterval = setInterval(() => {
                gameData.timer--;
                elements.timerDisplay.textContent = gameData.timer;
                if (gameData.timer <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
            // ÂºÄÂßãÂá∫Áé∞Âú∞Èº†
            showMoles();
        }
        // ÈáçÁΩÆÊ∏∏ÊàèÁä∂ÊÄÅ
        function resetGame() {
            gameData.score = 0;
            gameData.timer = 60;
            gameData.correctHits = 0;
            gameData.wrongHits = 0;
            gameData.combo = 0;
            gameData.maxCombo = 0;
            gameData.gameActive = false;
            gameData.activeMoles = [];
            gameData.currentWordIndex = 0;
            gameData.remainingChances = 2;
            elements.scoreDisplay.textContent = "0";
            elements.timerDisplay.textContent = "60";
            elements.comboDisplay.textContent = "";
            elements.chancesDisplay.textContent = "2";
            // ÈöêËóèÊâÄÊúâÂú∞Èº†
            document.querySelectorAll(".mole").forEach(mole => {
                mole.classList.remove("mole-animation");
                mole.style.transform = "translateY(100%)";
                const wordBubble = mole.querySelector(".word-bubble");
                wordBubble.classList.add("hidden");
                wordBubble.textContent = "";
            });
        }
        // ËÆæÁΩÆÊñ∞ÁöÑÁõÆÊ†áÊñáÂ≠ó
        function setNewTargetWord() {
            const words = gameData.levels[gameData.currentLevel].words;
            // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™ÂçïËØç‰Ωú‰∏∫ÁõÆÊ†áÂçïËØç
            const randomIndex = Math.floor(Math.random() * words.length);
            gameData.targetWord = words[randomIndex];
            elements.targetWordDisplay.textContent = gameData.targetWord;
            // ÈáçÁΩÆÂâ©‰ΩôÊú∫‰ºö
            gameData.remainingChances = 2;
            elements.chancesDisplay.textContent = gameData.remainingChances;
            // Êí≠ÊîæÂçïËØçÂèëÈü≥
            playWordSound(gameData.targetWord);
        }
        // Êí≠ÊîæÂçïËØçÂèëÈü≥Ôºà‰ºòÂÖàÊú¨Âú∞Êñá‰ª∂ÔºåÂ§±Ë¥•Âàô‰ΩøÁî®TTSÔºâ
        function playWordSound(word) {
            // ÂÖàÂ∞ùËØïÊí≠ÊîæÊú¨Âú∞Èü≥È¢ë
            const localAudio = new Audio(`audio/${word}.mp3`);

            localAudio.play().catch(error => {
                console.log('Êú¨Âú∞Èü≥È¢ëÊí≠ÊîæÂ§±Ë¥•ÔºåÂ∞ùËØï‰ΩøÁî®TTS');
                // Êú¨Âú∞Êñá‰ª∂Âä†ËΩΩÂ§±Ë¥•Êó∂‰ΩøÁî®TTS
                if ('speechSynthesis' in window) {
                    const msg = new SpeechSynthesisUtterance();
                    msg.text = word;
                    msg.lang = 'zh-CN'; // ËÆæÁΩÆ‰∏∫‰∏≠ÊñáÂèëÈü≥
                    msg.rate = 0.9; // ËØ≠ÈÄü
                    msg.pitch = 1; // Èü≥È´ò

                    // Â∞ùËØïËé∑Âèñ‰∏≠ÊñáËØ≠Èü≥
                    const voices = speechSynthesis.getVoices().filter(v => v.lang === 'zh-CN');
                    if (voices.length > 0) {
                        msg.voice = voices[0];
                    }

                    speechSynthesis.speak(msg);
                } else {
                    console.log('ÊµèËßàÂô®‰∏çÊîØÊåÅËØ≠Èü≥ÂêàÊàê');
                    // Â¶ÇÊûúÈÉΩ‰∏çÊîØÊåÅÔºåÂèØ‰ª•Âú®ËøôÈáåÊ∑ªÂä†ÁΩëÁªúAPIË∞ÉÁî®
                }
            });

            // Ê∑ªÂä†ÈîôËØØÁõëÂê¨ÔºàÂ§ÑÁêÜ404Á≠âÊÉÖÂÜµÔºâ
            localAudio.addEventListener('error', (e) => {
                console.log('Êú¨Âú∞Èü≥È¢ëÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∞ùËØï‰ΩøÁî®TTS');
                localAudio.remove(); // ÁßªÈô§Êó†ÊïàÁöÑÈü≥È¢ëÂÖÉÁ¥†

                // Âêå‰∏äTTSÈÄªËæë
                if ('speechSynthesis' in window) {
                    const msg = new SpeechSynthesisUtterance(word);
                    msg.lang = 'zh-CN';
                    speechSynthesis.speak(msg);
                }
            });
        }
        // ÊòæÁ§∫Âú∞Èº†
        function showMoles() {
            if (!gameData.gameActive) return;
            // Ê∏ÖÈô§ÂΩìÂâçÊ¥ªÂä®ÁöÑÂú∞Èº†
            gameData.activeMoles.forEach(index => {
                const hole = document.querySelector(`.hole[data-index="${index}"]`);
                const mole = hole.querySelector(".mole");
                mole.classList.remove("mole-animation");
                mole.style.transform = "translateY(100%)";
                const wordBubble = mole.querySelector(".word-bubble");
                wordBubble.classList.add("hidden");
            });
            gameData.activeMoles = [];
            // ÈöèÊú∫ÈÄâÊã©2-4‰∏™Ê¥û
            const holeCount = document.querySelectorAll(".hole").length;
            const moleCount = Math.floor(Math.random() * 3) + 2; // 2-4Âè™Âú∞Èº†
            // Á°Æ‰øùËá≥Â∞ëÊúâ‰∏ÄÂè™Âú∞Èº†‰∏æÁùÄÊ≠£Á°ÆÁöÑÊñáÂ≠ó
            const correctMoleIndex = Math.floor(Math.random() * moleCount);
            for (let i = 0; i < moleCount; i++) {
                let holeIndex;
                do {
                    holeIndex = Math.floor(Math.random() * holeCount);
                } while (gameData.activeMoles.includes(holeIndex));
                gameData.activeMoles.push(holeIndex);
                const hole = document.querySelector(`.hole[data-index="${holeIndex}"]`);
                const mole = hole.querySelector(".mole");
                const wordBubble = mole.querySelector(".word-bubble");
                // ËÆæÁΩÆÊñáÂ≠ó
                let word;
                if (i === correctMoleIndex) {
                    word = gameData.targetWord;
                    mole.dataset.correct = "true";
                } else {
                    // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™‰∏çÂêåÁöÑÊñáÂ≠ó
                    const words = gameData.levels[gameData.currentLevel].words;
                    do {
                        word = words[Math.floor(Math.random() * words.length)];
                    } while (word === gameData.targetWord);
                    mole.dataset.correct = "false";
                }
                wordBubble.textContent = word;
                wordBubble.classList.remove("hidden");
                // ÊòæÁ§∫Âú∞Èº†
                mole.classList.add("mole-animation");
                mole.style.transform = "translateY(0)";
            }
            // ËÆæÁΩÆ‰∏ã‰∏ÄÊâπÂú∞Èº†Âá∫Áé∞ÁöÑÊó∂Èó¥
            const nextMoleTime = Math.floor(Math.random() * 1000) + 2500; // 2.5-3.5Áßí
            setTimeout(() => {
                if (gameData.gameActive) {
                    showMoles();
                }
            }, nextMoleTime);
        }
        // Â§ÑÁêÜÂú∞Èº†ÁÇπÂáª
        function handleMoleClick(event) {
            if (!gameData.gameActive) return;
            const hole = event.currentTarget;
            const holeIndex = parseInt(hole.dataset.index);
            // Ê£ÄÊü•ÊòØÂê¶ÊòØÊ¥ªÂä®ÁöÑÂú∞Èº†
            if (!gameData.activeMoles.includes(holeIndex)) return;
            const mole = hole.querySelector(".mole");
            const isCorrect = mole.dataset.correct === "true";
            // Âú∞Èº†Ë¢´Âáª‰∏≠ÁöÑÂä®Áîª
            mole.classList.remove("mole-animation");
            mole.classList.add("shake");
            setTimeout(() => {
                mole.classList.remove("shake");
                mole.style.transform = "translateY(100%)";
                const wordBubble = mole.querySelector(".word-bubble");
                wordBubble.classList.add("hidden");
            }, 300);
            // ‰ªéÊ¥ªÂä®Âú∞Èº†ÂàóË°®‰∏≠ÁßªÈô§
            gameData.activeMoles = gameData.activeMoles.filter(index => index !== holeIndex);
            // Êõ¥Êñ∞ÂàÜÊï∞
            updateScore(isCorrect, hole);
            // Â¶ÇÊûúÊòØÊ≠£Á°ÆÁöÑÁÇπÂáªÔºåÂàõÂª∫Á≤íÂ≠êÊïàÊûú
            if (isCorrect) {
                createParticles(event.clientX, event.clientY);
            }
            // Â¶ÇÊûúÊâÄÊúâÂú∞Èº†ÈÉΩË¢´Âáª‰∏≠ÔºåÁîüÊàêÊñ∞ÁöÑÂú∞Èº†
            if (gameData.activeMoles.length === 0) {
                setTimeout(showMoles, 500);
            }
        }
        // ÂàõÂª∫Á≤íÂ≠êÊïàÊûú
        function createParticles(x, y) {
            const colors = ['#FF6B35', '#4CAF50', '#FFC107', '#2196F3', '#9C27B0', '#FF5722'];
            const particleCount = 20;
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                // ÈöèÊú∫ÊñπÂêëÂíåË∑ùÁ¶ª
                const angle = Math.random() * Math.PI * 2;
                const distance = 50 + Math.random() * 50;
                const xDistance = Math.cos(angle) * distance;
                const yDistance = Math.sin(angle) * distance;
                particle.style.setProperty('--x', `${xDistance}px`);
                particle.style.setProperty('--y', `${yDistance}px`);
                document.body.appendChild(particle);
                // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§Á≤íÂ≠ê
                setTimeout(() => {
                    if (particle.parentNode) {
                        particle.parentNode.removeChild(particle);
                    }
                }, 800);
            }
        }
        // Êõ¥Êñ∞ÂàÜÊï∞
        function updateScore(isCorrect, hole) {
            let scoreChange = 0;
            let scoreText = "";
            let scoreClass = "";
            if (isCorrect) {
                gameData.correctHits++;
                gameData.combo++;
                if (gameData.combo > gameData.maxCombo) {
                    gameData.maxCombo = gameData.combo;
                }
                // ËøûÂáªÂä†Êàê
                const comboMultiplier = gameData.combo >= 3 ? 1.5 : 1;
                scoreChange = Math.floor(100 * comboMultiplier);
                scoreText = `+${scoreChange}`;
                scoreClass = "text-green-600 score-up";
                // Êõ¥Êñ∞ËøûÂáªÊòæÁ§∫
                if (gameData.combo >= 3) {
                    elements.comboDisplay.textContent = `ËøûÂáª x${gameData.combo} (x1.5)`;
                } else if (gameData.combo >= 2) {
                    elements.comboDisplay.textContent = `ËøûÂáª x${gameData.combo}`;
                } else {
                    elements.comboDisplay.textContent = "";
                }
                // Êí≠ÊîæÊ≠£Á°ÆÈü≥Êïà
                const audio = new Audio();
                audio.src = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAAbAAkJCQkJCQkJCQkJCQkJCQwMDAwMDAwMDAwMDAwMDA4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC4xMwAAAAAAAAAAAAAAACQCkAAAAAAAAAGwxQa53QAAAAAAAAAAAAAAAAAAAAAA/+MYxAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDsAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxHYAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";
                audio.play();
                // Â¶ÇÊûúÊ≠£Á°ÆÂáª‰∏≠ÔºåÂáèÂ∞ëÂâ©‰ΩôÊú∫‰ºö
                gameData.remainingChances--;
                elements.chancesDisplay.textContent = gameData.remainingChances;
                // Â¶ÇÊûúÊú∫‰ºöÁî®ÂÆåÔºåËøõÂÖ•‰∏ã‰∏Ä‰∏™ÂçïËØç
                if (gameData.remainingChances <= 0) {
                    gameData.currentWordIndex++;
                    setTimeout(() => {
                        if (gameData.gameActive) {
                            setNewTargetWord();
                            showMoles();
                        }
                    }, 1000);
                }
            } else {
                gameData.wrongHits++;
                gameData.combo = 0;
                scoreChange = -50;
                scoreText = scoreChange.toString();
                scoreClass = "text-red-600 score-down";
                elements.comboDisplay.textContent = "";
                            // Êí≠ÊîæÈîôËØØÈü≥Êïà
            const audio = new Audio();
            audio.src = "data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA/+M4wAAAAAAAAAAAAEluZm8AAAAPAAAAAwAAAbAAkJCQkJCQkJCQkJCQkJCQwMDAwMDAwMDAwMDAwMDA4ODg4ODg4ODg4ODg4ODg4P//////////////////////////AAAAAExhdmM1OC4xMwAAAAAAAAAAAAAAACQCkAAAAAAAAAGwxQa53QAAAAAAAAAAAAAAAAAAAAAA/+MYxAAAAANIAAAAAExBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxDsAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxHYAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV";
            audio.play();
        }
        // Êõ¥Êñ∞ÊÄªÂàÜ
        gameData.score += scoreChange;
        if (gameData.score < 0) gameData.score = 0;
        elements.scoreDisplay.textContent = gameData.score;
        // ÊòæÁ§∫ÂàÜÊï∞Âä®Áîª
        const scoreAnimation = document.createElement("div");
        scoreAnimation.className = `absolute text-xl font-bold ${scoreClass}`;
        scoreAnimation.style.left = "50%";
        scoreAnimation.style.top = "50%";
        scoreAnimation.style.transform = "translate(-50%, -50%)";
        scoreAnimation.textContent = scoreText;
        hole.appendChild(scoreAnimation);
        setTimeout(() => {
            scoreAnimation.remove();
        }, 800);
    }
    // ÁªìÊùüÊ∏∏Êàè
    function endGame() {
        gameData.gameActive = false;
        // ÈöêËóèÊâÄÊúâÂú∞Èº†
        document.querySelectorAll(".mole").forEach(mole => {
            mole.classList.remove("mole-animation");
            mole.style.transform = "translateY(100%)";
            const wordBubble = mole.querySelector(".word-bubble");
            wordBubble.classList.add("hidden");
        });
        // ÊòæÁ§∫ÁªìÁÆóÁïåÈù¢
        elements.finalScoreDisplay.textContent = gameData.score;
        elements.resultDifficultyDisplay.textContent = gameData.levels[gameData.currentLevel].name;
        elements.resultTimeDisplay.textContent = "60Áßí";
        const totalHits = gameData.correctHits + gameData.wrongHits;
        const accuracy = totalHits > 0 ? Math.round((gameData.correctHits / totalHits) * 100) : 0;
        elements.resultAccuracyDisplay.textContent = `${accuracy}%`;
        elements.resultComboDisplay.textContent = gameData.maxCombo;
        elements.resultModal.classList.remove("hidden");
    }
    // ÂàùÂßãÂåñÊ∏∏Êàè
    window.addEventListener("DOMContentLoaded", initGame);
</script>
</body>

</html>