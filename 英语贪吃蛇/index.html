<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ğŸ‘¨â€ğŸ’»ä½³æ›¦ à­§â¢âƒà­¨æ¶ˆæ¶ˆå•è¯âš”ï¸</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #212121;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            color: white;
            touch-action: none;
        }

        #game-container {
            width: 100%;
            max-width: 600px;
            height: 100%;
            display: flex;
            flex-direction: column;
            box-sizing: border-box;
        }

        #info-container {
            display: flex;
            justify-content: space-between;
            padding: 15px 5%;
            font-size: 18px;
            box-sizing: border-box;
        }

        #game-board {
            width: 100%;
            flex-grow: 1;
            background: #333;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }

        canvas {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        /* æ‰‹æœºæ§åˆ¶æ ·å¼ */
        .mobile-controls {
            display: none;
            width: 120px;
            height: 120px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            position: relative;
        }

        .joystick-knob {
            width: 40px;
            height: 40px;
            background: #fff;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.1s;
        }

        .control-button {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #4CAF50;
            border: none;
            color: white;
            font-size: 16px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* PCæ–¹å‘é”®æ ·å¼ */
        .pc-controls {
            display: none;
            width: 400px;
            justify-content: center;
            flex-wrap: wrap;
            background-color: transparent;
            gap: 10px;
        }

        .pc-controls > div {
            width: 100%;
            display: flex;
            justify-content: center;
        }

        .pc-controls span {
            cursor: pointer;
            position: relative;
            height: 60px;
            width: 60px;
            padding: 8px 15px;
            margin: 4px;
            display: inline-block;
            border-radius: 10px;
            background: linear-gradient(180deg, #282828, #202020);
            box-shadow: inset -8px 0 8px rgba(0, 0, 0, 0.15),
                inset 0 -8px 8px rgba(0, 0, 0, 0.25), 
                0 0 0 2px rgba(0, 0, 0, 0.75),
                10px 20px 25px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            border: none;
        }

        .pc-controls span::before {
            content: "";
            position: absolute;
            top: 3px;
            left: 4px;
            bottom: 14px;
            right: 12px;
            background: linear-gradient(90deg, #232323, #4a4a4a);
            border-radius: 10px;
            box-shadow: -10px -10px 10px rgba(255, 255, 255, 0.25),
                10px 5px 10px rgba(0, 0, 0, 0.15);
            border-left: 1px solid #0004;
            border-bottom: 1px solid #0004;
            border-top: 1px solid #0009;
        }

        .pc-controls i {
            font-family: "Montserrat", sans-serif;
            position: relative;
            font-style: normal;
            font-size: 1.5rem;
            text-transform: uppercase;
            color: white;
        }

        /* è®¾å¤‡é€‚é… */
        @media (hover: hover) and (pointer: fine) {
            .pc-controls { display: flex; }
            .mobile-controls { display: none !important; }
        }

        @media (hover: none) and (pointer: coarse) {
            .mobile-controls { display: block; }
            .pc-controls { display: none !important; }
        }

        #control-container {
            width: 100%;
            padding: 20px 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
        }

        #action-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="info-container">
            <div id="target-word">ç›®æ ‡å•è¯ï¼š</div>
            <div id="level">å…³å¡ï¼š1</div>
            <div id="timer">ç”¨æ—¶ï¼š0s</div>
        </div>
        
        <div id="game-board">
            <canvas id="game-canvas"></canvas>
        </div>

        <div id="control-container">
            <div class="mobile-controls">
                <div class="joystick-knob"></div>
            </div>
            
            <div class="pc-controls">
                <div>
                    <span data-direction="up"><i>W</i></span>
                </div>
                <div>
                    <span data-direction="left"><i>A</i></span>
                    <span data-direction="down"><i>S</i></span>
                    <span data-direction="right"><i>D</i></span>
                </div>
            </div>

            <button class="control-button" id="restart-btn">é‡å¼€</button>

            <!-- åœ¨control-containerå†…æ·»åŠ æ–‡ä»¶ä¸Šä¼ æ§ä»¶å’Œå…¶ä»–æŒ‰é’® -->
            <div id="action-container">
                <input type="file" id="wordFile" accept=".txt" hidden>
                <button onclick="document.getElementById('wordFile').click()" 
                        style="padding: 8px 15px; background: #4CAF50; color: white; border: none; border-radius: 5px;">
                    ä¸Šä¼ å•è¯è¡¨
                </button>
                <button id="muteBtn">é™éŸ³</button>
                <select id="listSelector" style="margin-top: 10px;">
                    <option value="default">é»˜è®¤åˆ—è¡¨</option>
                    <option value="animals">åŠ¨ç‰©åˆ—è¡¨</option>
                    <option value="colors">é¢œè‰²åˆ—è¡¨</option>
                    <option value="bodyParts">èº«ä½“åˆ—è¡¨</option>
                    <option value="familyMembers">å®¶äººä¹‰åˆ—è¡¨</option>
                    <option value="timeRelated">æ—¥æœŸåˆ—è¡¨</option>
                    <option value="weekdays">æ˜ŸæœŸåˆ—è¡¨</option>
                    <option value="monthsAndSeasons">æœˆä»½åˆ—è¡¨</option>
                    
                </select>
            </div>
        </div>
    </div>

<script>
const canvas = document.getElementById('game-canvas');
const ctx = canvas.getContext('2d');
const targetWordElement = document.getElementById('target-word');
const levelElement = document.getElementById('level');
const timerElement = document.getElementById('timer');
const joystickKnob = document.querySelector('.joystick-knob');

// æ¸¸æˆé…ç½®
const CELL_SIZE = 40;
const INITIAL_LENGTH = 1;
const MAX_WORD_LENGTH = 8;

// æ¸¸æˆçŠ¶æ€
let gameState = {
    snake: [],
    food: [],
    targetWord: '',
    currentLetterIndex: 0,
    level: 1,
    isGameActive: false,
    startTime: 0,
    direction: { x: 0, y: 0 },
    words: [
        { en: 'apple', zh: 'è‹¹æœ' },
        { en: 'banana', zh: 'é¦™è•‰' },
        { en: 'cherry', zh: 'æ¨±æ¡ƒ' },
        { en: 'date', zh: 'æ£' },
        { en: 'fig', zh: 'æ— èŠ±æœ' },
        { en: 'grape', zh: 'è‘¡è„' },
        { en: 'lemon', zh: 'æŸ æª¬' },
        { en: 'mango', zh: 'èŠ’æœ' },
        { en: 'melon', zh: 'ç“œ' },
        { en: 'orange', zh: 'æ©™å­' },
        { en: 'peach', zh: 'æ¡ƒå­' },
        { en: 'pear', zh: 'æ¢¨' },
        { en: 'plum', zh: 'æå­' },
        { en: 'pineapple', zh: 'è è' },
        { en: 'strawberry', zh: 'è‰è“' },
        { en: 'watermelon', zh: 'è¥¿ç“œ' }
    ],
    currentWordIndex: 0,
    lastPlayTime: 0
};

// éŸ³é¢‘ç®¡ç†
const audio = {
    enabled: true,
    currentAudio: null,
    play: async function(word) {
        if (!this.enabled || !word) return;
        
        try {
            this.currentAudio?.pause();
            const audio = new Audio(`https://dict.youdao.com/dictvoice?audio=${encodeURIComponent(word)}`);
            await audio.play();
            this.currentAudio = audio;
        } catch (error) {
            console.log('éŸ³é¢‘æ’­æ”¾å¤±è´¥:', error);
        }
    }
};

// åˆå§‹åŒ–æ¸¸æˆ
function initGame() {
    resizeCanvas();
    
    gameState = {
        snake: [{ 
            x: canvas.width/2, 
            y: canvas.height/2,
            radius: CELL_SIZE/2 
        }],
        food: [],
        targetWord: generateRandomWord(),
        currentLetterIndex: 0,
        level: 1,
        isGameActive: true,
        startTime: Date.now(),
        direction: { x: 0, y: 0 },
        words: gameState.words,
        currentWordIndex: 0,
        lastPlayTime: Date.now()
    };
    
    updateDisplay();
    generateFood();
    audio.play(gameState.targetWord.en.toLowerCase());
    gameLoop();
}

function resizeCanvas() {
    const container = document.getElementById('game-board');
    canvas.width = container.offsetWidth;
    canvas.height = container.offsetHeight;
}

function generateRandomWord() {
    const word = gameState.words.length > 0 
        ? gameState.words[Math.floor(Math.random() * gameState.words.length)]
        : { en: '', zh: '' };
    return word;
}

function generateFood() {
    gameState.food = [];
    gameState.targetWord.en.split('').forEach(letter => {
        let pos;
        do {
            pos = {
                x: CELL_SIZE/2 + Math.random() * (canvas.width - CELL_SIZE),
                y: CELL_SIZE/2 + Math.random() * (canvas.height - CELL_SIZE),
                letter: letter,
                radius: CELL_SIZE/2
            };
        } while(checkCollision(pos));
        gameState.food.push(pos);
    });
}

function checkCollision(obj) {
    return [...gameState.snake, ...gameState.food].some(item => {
        const dx = item.x - obj.x;
        const dy = item.y - obj.y;
        return Math.sqrt(dx*dx + dy*dy) < (item.radius + obj.radius);
    });
}

function gameLoop() {
    if(!gameState.isGameActive) return;
    
    // æ¯5ç§’é‡å¤æ’­æ”¾å½“å‰å•è¯
    if(Date.now() - gameState.lastPlayTime > 5000) {
        audio.play(gameState.targetWord.en.toLowerCase());
        gameState.lastPlayTime = Date.now();
    }
    
    updateSnakePosition();
    checkFoodCollision();
    checkWallCollision();
    drawGame();
    
    requestAnimationFrame(gameLoop);
    updateTimer();
}

function updateSnakePosition() {
    const speed = CELL_SIZE * 0.08;
    const head = { 
        x: gameState.snake[0].x + gameState.direction.x * speed,
        y: gameState.snake[0].y + gameState.direction.y * speed,
        radius: CELL_SIZE/2
    };
    
    gameState.snake.unshift(head);
    gameState.snake.pop();
}

function checkFoodCollision() {
    gameState.food.forEach((food, index) => {
        const dx = food.x - gameState.snake[0].x;
        const dy = food.y - gameState.snake[0].y;
        const distance = Math.sqrt(dx*dx + dy*dy);
        
        if(distance < CELL_SIZE) {
            if(food.letter === gameState.targetWord.en[gameState.currentLetterIndex]) {
                gameState.food.splice(index, 1);
                gameState.currentLetterIndex++;
                if(gameState.currentLetterIndex === gameState.targetWord.en.length) {
                    nextLevel();
                }
            }
        }
    });
}

function nextLevel() {
    audio.play(gameState.targetWord.en.toLowerCase());
    gameState.currentWordIndex++;
    if(gameState.currentWordIndex < gameState.words.length) {
        gameState.level++;
        gameState.currentLetterIndex = 0;
        gameState.targetWord = generateRandomWord();
        generateFood();
        updateDisplay();
        audio.play(gameState.targetWord.en.toLowerCase());
    } else {
        endGame();
    }
}

function checkWallCollision() {
    const head = gameState.snake[0];
    if(head.x < 0 || head.x > canvas.width || head.y < 0 || head.y > canvas.height) {
        endGame();
    }
}

function drawGame() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // ç»˜åˆ¶è›‡
    gameState.snake.forEach((segment, index) => {
        ctx.beginPath();
        ctx.arc(segment.x, segment.y, segment.radius, 0, Math.PI*2);
        ctx.fillStyle = index === 0 ? '#4CAF50' : '#2196F3';
        ctx.fill();
    });
    
    // ç»˜åˆ¶é£Ÿç‰©
    gameState.food.forEach(food => {
        ctx.beginPath();
        ctx.arc(food.x, food.y, food.radius, 0, Math.PI*2);
        ctx.fillStyle = '#FF5722';
        ctx.fill();
        
        ctx.fillStyle = 'white';
        ctx.font = `${CELL_SIZE/2}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(food.letter, food.x, food.y);
    });
}

function updateTimer() {
    const elapsed = Math.floor((Date.now() - gameState.startTime)/1000);
    timerElement.textContent = `ç”¨æ—¶ï¼š${elapsed}s`;
}

function updateDisplay() {
    targetWordElement.innerHTML = `ç›®æ ‡å•è¯ï¼š${gameState.targetWord.en} (${gameState.targetWord.zh})`;
    levelElement.textContent = `å…³å¡ï¼š${gameState.level}`;
}

function endGame() {
    gameState.isGameActive = false;
    const elapsed = Math.floor((Date.now() - gameState.startTime) / 1000);
    if (gameState.currentWordIndex >= gameState.words.length) {
        alert(`æ­å–œï¼ä½ å®Œæˆäº†æ‰€æœ‰å…³å¡ï¼æ€»ç”¨æ—¶ï¼š${elapsed}s`);
    } else {
        alert(`æ¸¸æˆç»“æŸï¼æ€»å…³å¡æ•°ï¼š${gameState.level}`);
    }
}

// è¾“å…¥æ§åˆ¶
let isTouching = false;
const joystickBase = document.querySelector('.mobile-controls');

// è™šæ‹Ÿæ‘‡æ†äº‹ä»¶
joystickBase.addEventListener('touchstart', e => {
    isTouching = true;
    updateJoystick(e.touches[0]);
    e.preventDefault();
});

joystickBase.addEventListener('touchmove', e => {
    if(isTouching) updateJoystick(e.touches[0]);
    e.preventDefault();
});

joystickBase.addEventListener('touchend', () => {
    isTouching = false;
    joystickKnob.style.transform = 'translate(-50%, -50%)';
    gameState.direction = { x: 0, y: 0 };
});

function updateJoystick(touch) {
    const rect = joystickBase.getBoundingClientRect();
    const centerX = rect.left + rect.width/2;
    const centerY = rect.top + rect.height/2;
    
    const deltaX = touch.clientX - centerX;
    const deltaY = touch.clientY - centerY;
    const distance = Math.min(Math.hypot(deltaX, deltaY), 40);
    const angle = Math.atan2(deltaY, deltaX);
    
    joystickKnob.style.transform = `
        translate(calc(${Math.cos(angle) * distance}px - 50%), 
                  calc(${Math.sin(angle) * distance}px - 50%))`;
    
    gameState.direction.x = Math.cos(angle);
    gameState.direction.y = Math.sin(angle);
}

// æ–¹å‘é”®æ§åˆ¶
document.querySelectorAll('[data-direction]').forEach(btn => {
    btn.addEventListener('mousedown', handleDirectionStart);
    btn.addEventListener('touchstart', e => {
        e.preventDefault();
        handleDirectionStart(e);
    });
});

function handleDirectionStart(e) {
    const direction = e.target.closest('[data-direction]').dataset.direction;
    const directions = {
        up: { x: 0, y: -1 },
        left: { x: -1, y: 0 },
        down: { x: 0, y: 1 },
        right: { x: 1, y: 0 }
    };
    gameState.direction = directions[direction];
}

// é‡Šæ”¾æ–¹å‘æ§åˆ¶
['mouseup', 'touchend'].forEach(event => {
    document.addEventListener(event, () => {
        gameState.direction = { x: 0, y: 0 };
    });
});

// é”®ç›˜æ§åˆ¶ï¼ˆæ–°å¢å›è½¦å’Œç©ºæ ¼é”®æ”¯æŒï¼‰
document.addEventListener('keydown', (e) => {
    // æ–¹å‘æ§åˆ¶
    const keyMap = {
        'w': {x:0,y:-1}, 'ArrowUp': {x:0,y:-1},
        'a': {x:-1,y:0}, 'ArrowLeft': {x:-1,y:0},
        's': {x:0,y:1}, 'ArrowDown': {x:0,y:1},
        'd': {x:1,y:0}, 'ArrowRight': {x:1,y:0}
    };
    
    // é‡å¼€æ§åˆ¶
    if(e.key === 'Enter' || e.key === ' ') {
        e.preventDefault(); // é˜»æ­¢ç©ºæ ¼é”®é»˜è®¤æ»šåŠ¨è¡Œä¸º
        initGame();
        return;
    }

    if(keyMap[e.key]) {
        gameState.direction = keyMap[e.key];
    }
});

// é™éŸ³æŒ‰é’®åŠŸèƒ½
document.getElementById('muteBtn').addEventListener('click', () => {
    audio.enabled = !audio.enabled;
    document.getElementById('muteBtn').textContent = audio.enabled ? 'é™éŸ³' : 'å–æ¶ˆé™éŸ³';
});

// åˆå§‹åŒ–
window.addEventListener('resize', () => {
    if(gameState.isGameActive) {
        resizeCanvas();
        generateFood();
    }
});
document.getElementById('restart-btn').addEventListener('click', initGame);

// å•è¯åˆ—è¡¨ç®¡ç†
// å•è¯åˆ—è¡¨ç®¡ç†
const wordLists = {
    default: [
        { en: 'apple', zh: 'è‹¹æœ' },
        { en: 'banana', zh: 'é¦™è•‰' },
        { en: 'cherry', zh: 'æ¨±æ¡ƒ' },
        { en: 'date', zh: 'æ£' },
        { en: 'fig', zh: 'æ— èŠ±æœ' },
        { en: 'grape', zh: 'è‘¡è„' },
        { en: 'lemon', zh: 'æŸ æª¬' },
        { en: 'mango', zh: 'èŠ’æœ' },
        { en: 'melon', zh: 'ç“œ' },
        { en: 'orange', zh: 'æ©™å­' },
        { en: 'peach', zh: 'æ¡ƒå­' },
        { en: 'pear', zh: 'æ¢¨' },
        { en: 'plum', zh: 'æå­' },
        { en: 'pineapple', zh: 'è è' },
        { en: 'strawberry', zh: 'è‰è“' },
        { en: 'watermelon', zh: 'è¥¿ç“œ' },
        { en: 'kiwi', zh: 'çŒ•çŒ´æ¡ƒ' },
        { en: 'blueberry', zh: 'è“è“' },
        { en: 'raspberry', zh: 'è¦†ç›†å­' },
        { en: 'blackberry', zh: 'é»‘è“' }
    ],
    animals: [
        { en: 'cat', zh: 'çŒ«' },
        { en: 'dog', zh: 'ç‹—' },
        { en: 'elephant', zh: 'å¤§è±¡' },
        { en: 'giraffe', zh: 'é•¿é¢ˆé¹¿' },
        { en: 'lion', zh: 'ç‹®å­' },
        { en: 'tiger', zh: 'è€è™' },
        { en: 'zebra', zh: 'æ–‘é©¬' },
        { en: 'monkey', zh: 'çŒ´å­' }
    ],
    colors: [
        { en: 'red', zh: 'çº¢è‰²' },
        { en: 'blue', zh: 'è“è‰²' },
        { en: 'green', zh: 'ç»¿è‰²' },
        { en: 'yellow', zh: 'é»„è‰²' },
        { en: 'black', zh: 'é»‘è‰²' },
        { en: 'white', zh: 'ç™½è‰²' },
        { en: 'pink', zh: 'ç²‰è‰²' },
        { en: 'orange', zh: 'æ©™è‰²' }
    ],
    bodyParts: [
        { en: 'head', zh: 'å¤´' },
        { en: 'eye', zh: 'çœ¼ç›' },
        { en: 'ear', zh: 'è€³æœµ' },
        { en: 'nose', zh: 'é¼»å­' },
        { en: 'mouth', zh: 'å˜´å·´' },
        { en: 'neck', zh: 'è„–å­' },
        { en: 'hair', zh: 'å¤´å‘' },
        { en: 'face', zh: 'è„¸' },
        { en: 'cheek', zh: 'è„¸é¢Š' },
        { en: 'lip', zh: 'å˜´å”‡' },
        { en: 'finger', zh: 'æ‰‹æŒ‡' },
        { en: 'leg', zh: 'è…¿' },
        { en: 'knee', zh: 'è†ç›–' },
        { en: 'foot', zh: 'è„š' },
        { en: 'toe', zh: 'è„šè¶¾' },
        { en: 'arm', zh: 'æ‰‹è‡‚' },
        { en: 'hand', zh: 'æ‰‹' }
    ],
    familyMembers: [
        { en: 'father', zh: 'çˆ¶äº²' },
        { en: 'mother', zh: 'æ¯äº²' },
        { en: 'son', zh: 'å„¿å­' },
        { en: 'daughter', zh: 'å¥³å„¿' },
        { en: 'brother', zh: 'å…„å¼Ÿ' },
        { en: 'sister', zh: 'å§å¦¹' },
        { en: 'grandpa', zh: 'çˆ·çˆ·/å¤–å…¬' },
        { en: 'grandma', zh: 'å¥¶å¥¶/å¤–å©†' },
        { en: 'aunt', zh: 'å§¨å¦ˆ/å§‘å¦ˆ' },
        { en: 'uncle', zh: 'å”å”/èˆ…èˆ…' },
        { en: 'cousin', zh: 'å ‚(è¡¨)å…„å¼Ÿå§å¦¹' },
        { en: 'twins', zh: 'åŒèƒèƒ' }
    ],
    timeRelated: [
        { en: 'year', zh: 'å¹´' },
        { en: 'month', zh: 'æœˆ' },
        { en: 'week', zh: 'å‘¨' },
        { en: 'day', zh: 'å¤©' },
        { en: 'hour', zh: 'å°æ—¶' },
        { en: 'minute', zh: 'åˆ†é’Ÿ' },
        { en: 'second', zh: 'ç§’' },
        { en: 'morning', zh: 'æ—©ä¸Š' },
        { en: 'afternoon', zh: 'ä¸‹åˆ' },
        { en: 'evening', zh: 'æ™šä¸Š' },
        { en: 'night', zh: 'å¤œæ™š' },
        { en: 'today', zh: 'ä»Šå¤©' },
        { en: 'yesterday', zh: 'æ˜¨å¤©' },
        { en: 'tomorrow', zh: 'æ˜å¤©' }
    ],
    weekdays: [
        { en: 'monday', zh: 'æ˜ŸæœŸä¸€' },
        { en: 'tuesday', zh: 'æ˜ŸæœŸäºŒ' },
        { en: 'wednesday', zh: 'æ˜ŸæœŸä¸‰' },
        { en: 'thursday', zh: 'æ˜ŸæœŸå››' },
        { en: 'friday', zh: 'æ˜ŸæœŸäº”' },
        { en: 'saturday', zh: 'æ˜ŸæœŸå…­' },
        { en: 'sunday', zh: 'æ˜ŸæœŸå¤©' }
    ],
    monthsAndSeasons: [
        { en: 'january', zh: 'ä¸€æœˆ' },
        { en: 'february', zh: 'äºŒæœˆ' },
        { en: 'march', zh: 'ä¸‰æœˆ' },
        { en: 'april', zh: 'å››æœˆ' },
        { en: 'may', zh: 'äº”æœˆ' },
        { en: 'june', zh: 'å…­æœˆ' },
        { en: 'july', zh: 'ä¸ƒæœˆ' },
        { en: 'august', zh: 'å…«æœˆ' },
        { en: 'september', zh: 'ä¹æœˆ' },
        { en: 'october', zh: 'åæœˆ' },
        { en: 'november', zh: 'åä¸€æœˆ' },
        { en: 'december', zh: 'åäºŒæœˆ' },
        { en: 'spring', zh: 'æ˜¥å¤©' },
        { en: 'summer', zh: 'å¤å¤©' },
        { en: 'autumn', zh: 'ç§‹å¤©' },
        { en: 'winter', zh: 'å†¬å¤©' }
    ]
};


// åˆ—è¡¨é€‰æ‹©å™¨
const listSelector = document.getElementById('listSelector');
listSelector.addEventListener('change', (e) => {
    const list = e.target.value;
    gameState.words = list === 'custom' ? gameState.words : [...wordLists[list]];
    initGame();
});

// æ–‡ä»¶ä¸Šä¼ å¤„ç†
document.getElementById('wordFile').addEventListener('change', async (e) => {
    const file = e.target.files[0];
    if (!file) return;

    try {
        const text = await file.text();
        const words = text.split('\n')
            .map(line => {
                const [en, zh] = line.split(',').map(part => part.trim());
                return { en, zh };
            })
            .filter(line => line.en.length > 0 && line.zh.length > 0);
        
        wordLists.custom = words;
        gameState.words = words;
        listSelector.value = 'custom';
        initGame();
    } catch (error) {
        alert('æ–‡ä»¶è¯»å–å¤±è´¥: ' + error.message);
    }
});

// åˆå§‹åŒ–æ¸¸æˆ
initGame();
</script>
</body>
</html>